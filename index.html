<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Family Trip to Hokkaido 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'snow-white': '#F0FFFF',
                        'ice-blue': '#B3E5FC',
                        'light-snow-blue': '#E5F3F7',
                        'deep-sea-blue': '#01579B',
                        'accent-yellow': '#FFD54F',
                        'soft-gray': '#F5F5F5'
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { background-color: #E5F3F7; font-family: 'Noto Sans TC', sans-serif; color: #334155; }
        .app-container { max-width: 480px; margin: 0 auto; min-height: 100vh; background-color: #ffffff; box-shadow: 0 0 30px rgba(0, 0, 0, 0.05); position: relative; padding-bottom: 90px; }
        .header-bg { background-color: #ffffff; position: relative; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); border-bottom-left-radius: 35px; border-bottom-right-radius: 35px; z-index: 10; }
        .header-image-container { width: 100%; height: 250px; overflow: hidden; border-bottom-left-radius: 35px; border-bottom-right-radius: 35px; }
        .header-image-container img { width: 100%; height: 100%; object-fit: cover; }
        .snow-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="%23fff" opacity="0.8"/><circle cx="20" cy="80" r="0.5" fill="%23fff" opacity="0.6"/><circle cx="70" cy="30" r="1.5" fill="%23fff" opacity="0.9"/></svg>'); background-size: 100px 100px; opacity: 0.7; animation: snowfall 10s linear infinite; z-index: 5; }
        @keyframes snowfall { to { background-position: 100px 100px; } }
        .side-tab-bar { position: absolute; bottom: 45px; right: 16px; z-index: 30; display: flex; gap: 8px; }
        .tab-button { width: 40px; height: 40px; border-radius: 9999px; display: flex; align-items: center; justify-content: center; font-size: 1.125rem; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); transition: all 0.2s ease; }
        .tab-button.active { background-color: #01579B; color: #ffffff; }
        .tab-button:not(.active) { background-color: #ffffff; color: #B3E5FC; }
        .app-main { padding-top: 25px !important; position: relative; z-index: 5; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .card-shadow { box-shadow: 0 4px 20px rgba(179, 229, 252, 0.3); }
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .date-selector-sticky { background-color: #ffffff; border-bottom: 1px solid #f0f0f0; z-index: 20; top: 0; }
    </style>
</head>
<body>

<div id="app" class="app-container">
    <div class="header-bg relative">
        <div class="header-image-container">
            <img src="IMG_4330.PNG" alt="北海道家族旅行計畫">
        </div>
        <div class="snow-layer"></div> 
        <div class="side-tab-bar">
            <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id" :class="{'active': currentTab === tab.id}" class="tab-button">
                <i :class="tab.icon"></i>
            </button>
        </div>
    </div>

    <main class="p-4 app-main">
        <div v-if="currentTab === 'itinerary'" class="animate-fade-in">
            <div class="flex items-center space-x-2 sticky date-selector-sticky pt-1 -mx-4 px-4 mb-2">
                <button @click="showDateEditModal = true" class="flex-shrink-0 w-10 h-[68px] bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center hover:bg-ice-blue hover:text-deep-sea-blue transition-colors">
                    <i class="fa-solid fa-calendar-check"></i>
                </button>
                
                <div class="flex overflow-x-auto hide-scrollbar space-x-3 pb-4 snap-x flex-1">
                    <div v-for="(day, index) in dates" :key="index" 
                         @click="selectedDateIndex = index"
                         class="snap-center flex-shrink-0 w-[58px] h-[68px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 border-2 shadow-sm"
                         :class="selectedDateIndex === index ? 'bg-deep-sea-blue text-white border-deep-sea-blue shadow-lg scale-105' : 'bg-white text-slate-400 border-white hover:bg-soft-gray'">
                        <span class="text-sm font-bold uppercase tracking-wider">{{ day.weekday }}</span> 
                        <span class="text-xs font-medium opacity-70">{{ day.date }}</span> 
                    </div>
                </div>
            </div>

            <div v-if="weatherData[selectedDateIndex]" class="mb-4 bg-snow-white border border-ice-blue rounded-2xl p-4 flex justify-between items-center shadow-md">
                <div class="flex items-start text-deep-sea-blue space-x-4">
                    <i :class="getWeatherIcon(weatherData[selectedDateIndex].condition)" class="text-5xl text-blue-500"></i>
                    <div class="pt-1">
                        <span class="text-3xl font-extrabold leading-none">{{ weatherData[selectedDateIndex].temp.split('/')[0] }}°</span>
                        <span class="text-sm font-light text-slate-500 ml-1">/ {{ weatherData[selectedDateIndex].temp.split('/')[1] }}°C</span>
                    </div>
                </div>
                <div class="text-right text-xs text-slate-600">
                    <span class="font-bold block text-slate-700">{{ getWeatherDescription(weatherData[selectedDateIndex].condition) }}</span>
                    <span v-if="dates[selectedDateIndex].hasCar" class="mt-1 block text-deep-sea-blue font-bold"><i class="fa-solid fa-car-side mr-1 text-accent-yellow"></i> 租車日</span>
                </div>
            </div>

            <div class="space-y-4">
                <div v-for="(item, idx) in currentItinerary" :key="item.id" class="bg-white rounded-3xl p-5 card-shadow relative border border-ice-blue/50">
                    <h3 class="text-lg font-bold text-slate-800">{{ item.name }}</h3>
                    <p class="text-sm text-slate-500">{{ item.startTime }} - {{ item.address }}</p>
                </div>
                <div v-if="currentItinerary.length === 0" class="text-center py-16 text-slate-300">
                    <i class="fa-solid fa-map-location-dot text-5xl mb-3"></i>
                    <p>本日尚無行程</p>
                </div>
            </div>
        </div>
        
        </main>

    <button v-if="currentTab !== 'info'" @click="handleAddClick" class="fixed bottom-6 right-6 w-14 h-14 bg-accent-yellow rounded-full shadow-lg text-deep-sea-blue text-2xl flex items-center justify-center z-40">
        <i class="fa-solid fa-plus"></i>
    </button>

    <div v-if="showDateEditModal" class="fixed inset-0 bg-black/50 z-50 flex items-end justify-center backdrop-blur-sm">
        <div class="bg-white rounded-t-3xl w-full max-w-md p-6 animate-fade-in" style="max-height: 80vh; overflow-y: auto;">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-bold text-xl text-slate-800">修改行程日期</h3>
                <button @click="showDateEditModal = false" class="text-slate-400 text-xl"><i class="fa-solid fa-xmark"></i></button>
            </div>
            
            <div class="space-y-4 mb-6">
                <div v-for="(day, index) in dates" :key="index" class="flex items-center space-x-3 bg-slate-50 p-3 rounded-2xl">
                    <div class="w-12 h-12 bg-deep-sea-blue text-white rounded-xl flex flex-col items-center justify-center font-bold">
                        <span class="text-[10px]">DAY</span>
                        <span>{{ index + 1 }}</span>
                    </div>
                    <div class="flex-1">
                        <input type="text" v-model="day.date" placeholder="MM/DD" @input="updateWeekday(index)"
                               class="w-full bg-transparent border-b-2 border-slate-200 focus:border-deep-sea-blue outline-none py-1 font-bold">
                    </div>
                    <div class="w-16 text-center">
                        <span class="text-sm text-slate-500 font-bold bg-white px-2 py-1 rounded shadow-sm border border-slate-100">{{ day.weekday }}</span>
                    </div>
                </div>
            </div>
            
            <button @click="showDateEditModal = false" class="w-full py-4 bg-deep-sea-blue text-white rounded-2xl font-bold shadow-lg">確認更新</button>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDateIndex = ref(0);
            const showDateEditModal = ref(false);
            
            const tabs = [
                { id: 'itinerary', icon: 'fa-solid fa-map-location-dot' },
                { id: 'info', icon: 'fa-solid fa-circle-info' },
                { id: 'shopping', icon: 'fa-solid fa-basket-shopping' },
                { id: 'expenses', icon: 'fa-solid fa-coins' }
            ];

            const dates = ref([
                { date: '02/01', weekday: 'SUN', hasCar: false },
                { date: '02/02', weekday: 'MON', hasCar: true },
                { date: '02/03', weekday: 'TUE', hasCar: true },
                { date: '02/04', weekday: 'WED', hasCar: true },
                { date: '02/05', weekday: 'THU', hasCar: true },
                { date: '02/06', weekday: 'FRI', hasCar: true },
                { date: '02/07', weekday: 'SAT', hasCar: false }
            ]);

            const weatherData = ref([
                { condition: 'snow', temp: '-2/-8', feel: '-11' },
                { condition: 'cloudy', temp: '0/-5', feel: '-4' },
                { condition: 'snow', temp: '-3/-9', feel: '-12' },
                { condition: 'clear', temp: '1/-4', feel: '-2' },
                { condition: 'cloudy', temp: '-1/-6', feel: '-5' },
                { condition: 'snow', temp: '-4/-10', feel: '-14' },
                { condition: 'clear', temp: '2/-3', feel: '0' }
            ]);

            const itineraries = ref({
                0: [{ id: 1, name: '新千歲機場', startTime: '13:15', address: '千歲市', category: 'transport' }],
                1: [{ id: 2, name: '札幌電視塔', startTime: '10:00', address: '札幌市中央區', category: 'spot' }]
            });

            const currentItinerary = computed(() => itineraries.value[selectedDateIndex.value] || []);

            // 自動更新星期功能
            const updateWeekday = (index) => {
                const dateStr = dates.value[index].date;
                if (dateStr.length === 5 && dateStr.includes('/')) {
                    const [month, day] = dateStr.split('/');
                    const year = 2026; // 你的標題是 2026
                    const dateObj = new Date(year, parseInt(month) - 1, parseInt(day));
                    if (!isNaN(dateObj)) {
                        const weekdays = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
                        dates.value[index].weekday = weekdays[dateObj.getDay()];
                    }
                }
            };

            const getWeatherIcon = (cond) => {
                const icons = { 'snow': 'fa-solid fa-snowflake', 'cloudy': 'fa-solid fa-cloud', 'clear': 'fa-solid fa-sun' };
                return icons[cond] || 'fa-solid fa-cloud-sun';
            };

            const getWeatherDescription = (cond) => {
                const desc = { 'snow': '大雪注意', 'cloudy': '多雲時晴', 'clear': '晴朗低溫' };
                return desc[cond] || '天氣穩定';
            };

            return {
                currentTab, tabs, dates, selectedDateIndex, showDateEditModal,
                currentItinerary, weatherData,
                updateWeekday, getWeatherIcon, getWeatherDescription
            };
        }
    }).mount('#app');
</script>

</body>
</html>
